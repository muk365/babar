<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêò Projet Babar - Outil Gratuit de Barres de Progression pour Twitch</title>
    <meta name="description" content="Cr√©ez des barres de progression et des objectifs de dons (donation goals) personnalisables pour votre stream Twitch. Outil gratuit, capturable par OBS, avec bot int√©gr√©.">
    <meta name="keywords" content="twitch, overlay, donation goal, barre de progression, objectif de dons, sub goal, bits goal, streamer, outil, gratuit, obs, streamlabs, babar">
    <link rel="canonical" href="https://projet-babar.netlify.app">
    <meta property="og:title" content="üêò Projet Babar - Outil Gratuit pour vos Objectifs Twitch">
    <meta property="og:description" content="Gestionnaire complet de barres de progression pour streamers. Personnalisable, draggable, avec bot int√©gr√© pour d√©tecter subs, bits et dons.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://projet-babar.netlify.app">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="üêò Projet Babar - Outil Gratuit pour vos Objectifs Twitch">
    <meta name="twitter:description" content="Gestionnaire complet de barres de progression pour streamers. Personnalisable, draggable, avec bot int√©gr√©.">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Caveat&family=Comfortaa&family=Dancing+Script&family=Fredoka+One&family=Indie+Flower&family=Josefin+Sans&family=Lobster&family=Montserrat:wght@400;700&family=Open+Sans&family=Oswald&family=Pacifico&family=Poppins&family=Raleway&family=Roboto&family=Shadows+Into+Light&display=swap" rel="stylesheet">
</head>
<body>
    <div id="login-screen">
        <div class="login-box">
            <h1>üêò Projet Babar</h1>
            <p>Gestionnaire de barres de progression pour vos streams Twitch.</p>
            <button id="login-button">Se connecter avec Twitch</button>
            <div id="debug-info" style="margin-top: 20px; font-size: 0.8em; color: #999;">
                <p>Status TMI: <span id="tmi-status">Chargement...</span></p>
            </div>
        </div>
    </div>
    <div id="app-wrapper" class="hidden">
        <header>
            <h1>üêò Tableau de bord Babar</h1>
            <div class="user-info">
                <p>Connect√© en tant que <strong id="username"></strong></p>
                <img id="profile-pic" src="" alt="Photo de profil">
                <button id="logout-button" class="logout-button">D√©connexion</button>
            </div>
        </header>
        <main class="main-container">
            <div class="config-panel">
                <h2>Configuration G√©n√©rale</h2>
                
                <!-- Debug Section -->
                <div class="debug-section" style="background: #2c3e50; padding: 15px; margin-bottom: 20px; border-radius: 5px; border: 2px solid #e74c3c;">
                    <h3 style="color: #e74c3c; margin-top: 0;">üîß Zone de Debug</h3>
                    <p style="font-size: 0.9em; margin: 5px 0;">Status Bot: <span id="bot-status" style="font-weight: bold; color: #f39c12;">Non connect√©</span></p>
                    <div style="display: flex; gap: 10px; margin: 10px 0;">
                        <button onclick="testBits()" style="background: #9b59b6; font-size: 0.8em; padding: 5px 10px;">Test 100 Bits</button>
                        <button onclick="testSub()" style="background: #3498db; font-size: 0.8em; padding: 5px 10px;">Test Sub T1</button>
                        <button onclick="testPrime()" style="background: #f39c12; font-size: 0.8em; padding: 5px 10px;">Test Prime</button>
                    </div>
                    <div id="debug-log" style="background: #1a1a1d; padding: 10px; max-height: 100px; overflow-y: auto; font-family: monospace; font-size: 0.8em; border-radius: 3px;"></div>
                </div>

                <div class="form-group">
                    <label>Police des textes</label>
                    <select id="font-selector">
                        <option value="'Montserrat', sans-serif">Montserrat</option>
                        <option value="'Roboto', sans-serif">Roboto</option>
                        <option value="'Open Sans', sans-serif">Open Sans</option>
                        <option value="'Poppins', sans-serif">Poppins</option>
                        <option value="'Raleway', sans-serif">Raleway</option>
                        <option value="'Oswald', sans-serif">Oswald</option>
                        <option value="'Bebas Neue', cursive">Bebas Neue</option>
                        <option value="'Josefin Sans', sans-serif">Josefin Sans</option>
                        <option value="'Comfortaa', cursive">Comfortaa</option>
                        <option value="'Anton', sans-serif">Anton</option>
                        <option value="'Lobster', cursive">Lobster</option>
                        <option value="'Pacifico', cursive">Pacifico</option>
                        <option value="'Caveat', cursive">Caveat</option>
                        <option value="'Dancing Script', cursive">Dancing Script</option>
                        <option value="'Indie Flower', cursive">Indie Flower</option>
                        <option value="'Shadows Into Light', cursive">Shadows Into Light</option>
                        <option value="'Fredoka One', cursive">Fredoka One</option>
                    </select>
                </div>

                <h3>üåü Goal Global üåü</h3>
                <div class="form-group">
                    <label for="global-title-input">Titre du Goal Global</label>
                    <input type="text" id="global-title-input" value="Objectif de Stream Global">
                </div>
                <div class="form-group">
                    <label for="global-target-input">Montant du Goal Global (‚Ç¨)</label>
                    <input type="number" id="global-target-input" value="1000" step="10">
                </div>

                <h3>üêò Ratios des √âv√©nements</h3>
                <div class="ratio-grid">
                    <div class="form-group">
                        <label>1 Prime = ‚Ç¨</label>
                        <input type="number" id="prime-ratio" value="2.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>100 Bits = ‚Ç¨</label>
                        <input type="number" id="bits-ratio" value="1" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>1 Sub T1 = ‚Ç¨</label>
                        <input type="number" id="sub-t1-ratio" value="5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>1 Sub T2 = ‚Ç¨</label>
                        <input type="number" id="sub-t2-ratio" value="10" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>1 Sub T3 = ‚Ç¨</label>
                        <input type="number" id="sub-t3-ratio" value="25" step="0.1">
                    </div>
                </div>

                <h3>ü§ñ Bot de Donation par Chat</h3>
                <div class="form-group">
                    <label for="bot-username-input">Nom du bot √† √©couter (optionnel)</label>
                    <input type="text" id="bot-username-input" placeholder="ex: Streamlabs">
                </div>
                <div class="form-group">
                    <label for="donation-trigger-text">Fragment de message √† d√©tecter</label>
                    <input type="text" id="donation-trigger-text" placeholder="ex: a fait un don de">
                    <small>Le bot cherchera un nombre dans le message du bot sp√©cifi√©.</small>
                </div>

                <h3>üîß Correction & Simulation</h3>
                <div class="form-group">
                    <label for="manual-add-amount">Ajouter ou Retirer un montant (‚Ç¨)</label>
                    <input type="number" id="manual-add-amount" placeholder="5.50 ou -10">
                    <button id="manual-add-button" style="margin-top: 10px; width: 100%;">Appliquer la correction</button>
                </div>

                <h3>üêò Cr√©er un nouveau Goal</h3>
                <div class="add-goal-form">
                    <input type="text" id="goal-title-input" placeholder="Titre (ex: Nouvelle Chaise)">
                    <input type="number" id="goal-target-input" placeholder="Objectif (‚Ç¨)">
                    <button id="add-goal-button">Ajouter le Goal</button>
                </div>
            </div>

            <div class="goals-display">
                <h2>Affichage pour OBS (Capture de fen√™tre)</h2>
                <div class="goal-container global-goal">
                    <h3 id="global-title-display">üåü Objectif de Stream Global üåü</h3>
                    <div class="progress-bar-wrapper">
                        <span class="progress-label start">0‚Ç¨</span>
                        <div class="progress-bar">
                            <div class="progress-bar-fill" id="global-fill"></div>
                            <span class="progress-bar-text" id="global-progress-text">0.00‚Ç¨</span>
                        </div>
                        <span class="progress-label end" id="global-target-text">1000‚Ç¨</span>
                    </div>
                    <div class="goal-config">
                        <label>Couleur</label>
                        <input type="color" class="color-picker" id="global-color" value="#ff8c00">
                        <label>Contour</label>
                        <input type="color" class="color-picker" id="global-contour-color" value="#ffffff">
                    </div>
                </div>
                <div id="goals-list"></div>
            </div>
        </main>

        <footer>
            <span id="about-toggle">üêò √Ä propos du Projet Babar / About Project Babar ‚ñº</span>
            <div id="about-section">
                <div class="language-columns">
                    <div class="language-column">
                        <h3>Projet Babar üá´üá∑</h3>
                        <p>L'outil ultime pour g√©rer vos objectifs de stream sur Twitch. Cr√©ez des barres de progression gratuites et personnalisables pour vos √©v√©nements, capturables directement via OBS.</p>
                        <h4>Fonctionnalit√©s Cl√©s :</h4>
                        <ul>
                            <li>üìä Barres Multiples et Dynamiques</li>
                            <li>üé® Personnalisation Totale (Couleurs, Polices)</li>
                            <li>ü§ñ Bot de Chat Int√©gr√© (Subs, Bits, Primes, Dons)</li>
                            <li>‚úã Glisser-D√©poser pour r√©organiser</li>
                            <li>üé• Changement de ratio avec CTRL + Molette</li>
                            <li>üîí Z√©ro Installation & 100% Priv√© (stockage local, veuillez whitelister les cookies du site)</li>
                        </ul>
                    </div>
                    <div class="language-column">
                        <h3>Project Babar üá¨üáß</h3>
                        <p>The ultimate tool to manage your Twitch stream goals. Create free, customizable progress bars for your events, perfectly designed to be captured through OBS.</p>
                        <h4>Key Features:</h4>
                        <ul>
                            <li>üìä Dynamic & Multiple Goal Bars</li>
                            <li>üé® Full Customization (Colors, Fonts)</li>
                            <li>ü§ñ Built-in Chat Bot (Subs, Bits, Primes, Donations)</li>
                            <li>‚úã Drag & Drop to reorder</li>
                            <li>üé• Ratio Change with CTRL + Mousewheel</li>
                            <li>üîí Zero-Install & 100% Private (local storage, please whitelist this site cookies)</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="copyright">Copyright 2025 Muk365</div>
        </footer>
    </div>

    <!-- TMI.js via CDN pour assurer le chargement -->
    <script src="tmi.min.js"></script>
    <script src="app.js"></script>
    
    <!-- Ko-fi widget -->
    <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
    kofiWidgetOverlay.draw('muk365', {
        'type': 'floating-chat',
        'floating-chat.donateButton.text': 'Support me',
        'floating-chat.donateButton.background-color': '#794bc4',
        'floating-chat.donateButton.text-color': '#fff'
    });
    
    // Fonctions de test globales
    function testBits() {
        if (window.BabarSimulateCheer) {
            window.BabarSimulateCheer(100, 'TestUser');
        }
    }
    
    function testSub() {
        if (window.BabarSimulateSub) {
            window.BabarSimulateSub('1000', 'TestUser');
        }
    }
    
    function testPrime() {
        if (window.BabarSimulateSub) {
            window.BabarSimulateSub('Prime', 'TestUser');
        }
    }
    </script>
</body>
</html>